<!DOCTYPE html>
<html>
  <head>
    <title>TG Bot Learning</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
  </head>
  <body>
    <p>Hello World!</p>
    <button data-purchase-id="my_purchase_id" id="testButton">Test</button>

    <script>
      const tg = Telegram.WebApp;

      let item = null;

      document.getElementById("testButton").addEventListener("click", function(e) {
        const button = e.target;
        if (item === null) {
          item = button.dataset.purchaseId;
          tg.MainButton.text = "Buy";
          tg.MainButton.visible = true;
        } else {
          item = null;
          tg.MainButton.visible = false;
        }
      });

      tg.onEvent("mainButtonClicked", () => {
        tg.sendData(item);
      });
    </script>
  </body>
</html>
